<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="/public/favicon.png" />
    <meta charset="UTF-8">
    <title>Mini SIEM Dashboard</title>
    <!-- Social Media Preview -->
    <meta property="og:image" content="/public/screenshot.png" />
    <meta property="og:title" content="Mini SIEM Dashboard" />
    <meta property="og:description" content="A modern honeypot and mini-SIEM dashboard for home-lab and research." />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="/public/screenshot.png" />
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <link rel="stylesheet" href="/public/style.css" />
</head>
<body>
    <div style="background:#0ea5e9;border-bottom:1px solid #38bdf8;padding:0.7em 0 0.7em 0;margin-bottom:1.2em;display:flex;justify-content:center;width:100vw;position:relative;left:50%;right:50%;margin-left:-50vw;margin-right:-50vw;">
        <div style="max-width:1200px;width:100%;display:flex;align-items:center;justify-content:space-between;margin:0 auto;">
            <div style="font-weight:bold;font-size:1.25em;color:#f8fafc;">Jeremy Ray Jewell</div>
            <div>
                <a href="https://github.com/jeremyrayjewell" target="_blank" style="color:#f8fafc;text-decoration:none;margin-right:1.2em;font-weight:500;">GitHub</a>
                <a href="https://www.linkedin.com/in/jeremyrayjewell" target="_blank" style="color:#f8fafc;text-decoration:none;margin-right:1.2em;font-weight:500;">LinkedIn</a>
                <a href="https://github.com/jeremyrayjewell/mini-siem-dashboard" target="_blank" style="color:#f8fafc;text-decoration:none;font-weight:500;">Repo</a>
            </div>
        </div>
    </div>
    <div class="main-content">
        <h1 style="margin-bottom:0.5em;">Mini SIEM Dashboard</h1>
        <div style="display:flex;flex-wrap:nowrap;gap:1.5em;margin-bottom:1.2em;align-items:flex-start;">
        <div style="background:transparent;border:none;padding:0.5em 1em;border-radius:6px;font-size:1em;min-width:260px;">
                <span style="font-weight:500;color:#0ea5e9">Send traffic to:</span>
                <span style="font-family:monospace;color:#0ea5e9"> https://backend-weathered-voice-4887.fly.dev</span>
            </div>
    <details style="padding:0.2em 0.7em;font-size:0.82em;width:260px;min-width:180px;max-width:260px;box-sizing:border-box;">
                <summary style="font-weight:500;font-size:0.98em;cursor:pointer;">Architecture</summary>
                <ul style="margin-top:0.5em;margin-bottom:0.5em;">
                    <li><b>Backend:</b> Python Flask app (Fly.io) logs honeypot events and exposes <code>/api/stats</code>.</li>
                    <li><b>Frontend:</b> Static dashboard (Netlify) fetches stats, displays analytics, and geo-IP map.</li>
                    <li><b>Geo-IP:</b> All geolocation is server-side via ipwho.is API, cached for efficiency.</li>
                    <li><b>Ports:</b> SSH (5022), FTP (21/5021), RDP (53389), MySQL (53306), Redis (56379), MongoDB (57017), HTTP (8080/5000).</li>
                </ul>
            </details>
        </div>
        <div class="stats" style="display: flex; gap: 2em; align-items: center; margin-bottom: 2em;">
            <div style="flex: 1; font-size: 1.1em;">
                <strong>Total Events:</strong> <span id="totalEvents">0</span>
            </div>
            <div style="flex: 1; font-size: 1.1em;">
                <strong>Last 24 Hours:</strong> <span id="last24h">0</span>
            </div>
        </div>
    </div>
    </div>
    <div class="main-content">
        <section class="analytics-grid">
            <div class="card">
                <h2>Geo-IP Map</h2>
                <div id="geoMap" style="height: 100%; width: 100%;"></div>
            </div>
            <div class="card">
                <h2>Events Over Time</h2>
                <canvas id="eventsOverTimeChart"></canvas>
            </div>
            <div class="card">
                <h2>Top IPs</h2>
                <canvas id="topIPsChart"></canvas>
            </div>
            <div class="card">
                <h2>Events by Protocol</h2>
                <canvas id="protocolChart"></canvas>
            </div>
        </section>
        <div style="display: flex; gap: 2em; align-items: flex-start; margin-bottom: 2em;">
            <div style="flex: 1;">
                <h2>Top IPs (Table)</h2>
                <table id="topIPs">
                    <thead><tr><th>IP</th><th>Count</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
            <div style="flex: 1;">
                <h2>Top Ports</h2>
                <table id="topPorts">
                    <thead><tr><th>Port</th><th>Count</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        <h2>Recent Events</h2>
        <div class="recent-events">
        <table id="recentEvents" class="compact-table">
                <thead>
                    <tr>
                        <th>Timestamp</th>
                        <th>IP</th>
                        <th>Port</th>
                        <th>Src Port</th>
                        <th>Protocol</th>
                        <th>Type</th>
                        <th>Message</th>
                        <th>User Agent</th>
                        <th>Banner Sent</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <script src="/public/main.js"></script>
</body>
    <footer style="margin-top:2em;padding:0.5em 0 0.3em 0;border-top:1px solid #e5e7eb;text-align:center;color:#64748b;background:#f8fafc;font-size:0.88em;width:100vw;position:relative;left:50%;right:50%;margin-left:-50vw;margin-right:-50vw;">
        <div style="max-width:1200px;margin:0 auto;">
            &copy; 2025 <a href="https://github.com/jeremyrayjewell" target="_blank" style="color:#0ea5e9;text-decoration:none;">Jeremy Ray Jewell</a>
        </div>
    </footer>
</html>